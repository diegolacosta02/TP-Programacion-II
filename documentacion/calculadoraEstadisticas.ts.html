<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: calculadoraEstadisticas.ts</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: calculadoraEstadisticas.ts</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import DriveHub from "./driveHub";
import Vehiculo from "./vehiculo";

/**
* Representa a una calculadora de estadísticas que
* permite informar los datos de un sistema
*/
export default class CalculadoraEstadisticas {
    private sistema: DriveHub;

    constructor(sistema: DriveHub) {
        this.sistema = sistema;
    }

    /**
     * Devuelve el vehículo más y menos alquilado dentro de un rango de fechas determinado.
     * @param {Date} fechaInicio - Fecha de inicio del período a analizar.
     * @param {Date} fechaFin - Fecha de fin del período a analizar.
     * @returns {{ mas: Vehiculo | null, menos: Vehiculo | null }} 
     * Objeto con dos propiedades:
     * `mas`: el vehículo con mayor cantidad de alquileres.
     * `menos`: el vehículo con menor cantidad de alquileres.
     * Si no hay reservas en el rango, ambas propiedades serán nul.
    */
    public getVehiculosMasYMenosAlquilados(fechaInicio: Date, fechaFin: Date): { mas: Vehiculo | null, menos: Vehiculo | null } {
        const reservas = this.sistema.getReservas();
        const vehiculos = this.sistema.getVehiculos();

        const conteo = new Map&lt;number, number>();

        reservas.forEach(reserva => {
            const inicio = reserva.getFechaInicio();
            if (inicio >= fechaInicio &amp;&amp; inicio &lt;= fechaFin) {
                const matricula = reserva.getVehiculo().getMatricula();
                conteo.set(matricula, (conteo.get(matricula) || 0) + 1);
            }
        });

        if (conteo.size === 0) {
            return { mas: null, menos: null };
        }

        let max = -Infinity;
        let min = Infinity;
        let vehiculoMas: Vehiculo | null = null;
        let vehiculoMenos: Vehiculo | null = null;

        vehiculos.forEach(v => {
            const cantidad = conteo.get(v.getMatricula()) || 0;
            if (cantidad > max) {
                max = cantidad;
                vehiculoMas = v;
            }
            if (cantidad &lt; min) {
                min = cantidad;
                vehiculoMenos = v;
            }
        });

        return { mas: vehiculoMas, menos: vehiculoMenos };
    }

    /**
     * Calcula el vehículo más rentable y el menos rentable del sistema.
     * La rentabilidad se define como:
     * rentabilidad = ingresos_por_alquileres - costos_de_mantenimiento
     * Donde los ingresos se calculan con el método `calcularTarifa(reserva)` de cada vehículo.
     * @returns {{ masRentable: Vehiculo | null, menosRentable: Vehiculo | null }}
     * Objeto con dos propiedades:
     * `masRentable`: el vehículo con mayor rentabilidad.
     * `menosRentable`: el vehículo con menor rentabilidad.
     * Si no hay vehículos registrados, ambas propiedades serán null.
    */
    public getRentabilidadVehiculos(): { masRentable: Vehiculo | null, menosRentable: Vehiculo | null } {
        const reservas = this.sistema.getReservas();
        const vehiculos = this.sistema.getVehiculos();

        if (vehiculos.length === 0) return { masRentable: null, menosRentable: null };

        let vehiculoMas: Vehiculo | null = null;
        let vehiculoMenos: Vehiculo | null = null;
        let maxRent = -Infinity;
        let minRent = Infinity;

        vehiculos.forEach(v => {
            let ingresos = 0;

            reservas.forEach(r => {
                if (r.getVehiculo() === v) {
                    ingresos += v.calcularTarifa(r);
                }
            });

            const costos = v.getCostoTotalMantenimientos();
            const rentabilidad = ingresos - costos;

            if (rentabilidad > maxRent) {
                maxRent = rentabilidad;
                vehiculoMas = v;
            }
            if (rentabilidad &lt; minRent) {
                minRent = rentabilidad;
                vehiculoMenos = v;
            }
        });

        return { masRentable: vehiculoMas, menosRentable: vehiculoMenos };
    }

    /**
     * Calcula el porcentaje de ocupación actual de la flota.
     * La ocupación se define como el porcentaje de vehículos cuyo estado actual
     * es `EN ALQUILER` sobre el total de vehículos registrados.
     * @returns {number} Porcentaje de ocupación de la flota.
     * Si no hay vehículos registrados, devuelve 0.
    */
    public getOcupacionFlota(): number {
        const vehiculos = this.sistema.getVehiculos();
        if (vehiculos.length === 0) return 0;

        const enAlquiler = vehiculos.filter(v => v.getEstado().getNombre() === ("EN ALQUILER")).length;
        return (enAlquiler / vehiculos.length) * 100;
    }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module.exports.html">exports</a></li></ul><h3>Global</h3><ul><li><a href="global.html#agregarMantenimientoAVehiculo">agregarMantenimientoAVehiculo</a></li><li><a href="global.html#calcularTarifa">calcularTarifa</a></li><li><a href="global.html#crearVehiculo">crearVehiculo</a></li><li><a href="global.html#getAlquileresDesdeUltMantenimiento">getAlquileresDesdeUltMantenimiento</a></li><li><a href="global.html#getCliente">getCliente</a></li><li><a href="global.html#getCosto">getCosto</a></li><li><a href="global.html#getCostoTotalMantenimientos">getCostoTotalMantenimientos</a></li><li><a href="global.html#getDescripcion">getDescripcion</a></li><li><a href="global.html#getDiasReservados">getDiasReservados</a></li><li><a href="global.html#getEstado">getEstado</a></li><li><a href="global.html#getFecha">getFecha</a></li><li><a href="global.html#getFechaFin">getFechaFin</a></li><li><a href="global.html#getFechaInicio">getFechaInicio</a></li><li><a href="global.html#getFechaUltMantenimiento">getFechaUltMantenimiento</a></li><li><a href="global.html#getHistorialMantenimiento">getHistorialMantenimiento</a></li><li><a href="global.html#getKilometraje">getKilometraje</a></li><li><a href="global.html#getKilometrajeUltMantenimiento">getKilometrajeUltMantenimiento</a></li><li><a href="global.html#getKmRecorridos">getKmRecorridos</a></li><li><a href="global.html#getMatricula">getMatricula</a></li><li><a href="global.html#getNombre">getNombre</a></li><li><a href="global.html#getOcupacionFlota">getOcupacionFlota</a></li><li><a href="global.html#getPorcentajeTemporada">getPorcentajeTemporada</a></li><li><a href="global.html#getRentabilidadVehiculos">getRentabilidadVehiculos</a></li><li><a href="global.html#getReservas">getReservas</a></li><li><a href="global.html#getVehiculo">getVehiculo</a></li><li><a href="global.html#getVehiculos">getVehiculos</a></li><li><a href="global.html#getVehiculosMasYMenosAlquilados">getVehiculosMasYMenosAlquilados</a></li><li><a href="global.html#ingresarReserva">ingresarReserva</a></li><li><a href="global.html#ingresarVehiculo">ingresarVehiculo</a></li><li><a href="global.html#puedeReservarse">puedeReservarse</a></li><li><a href="global.html#setAlquileresDesdeUltMantenimiento">setAlquileresDesdeUltMantenimiento</a></li><li><a href="global.html#setEstado">setEstado</a></li><li><a href="global.html#setFechaUltMantenimiento">setFechaUltMantenimiento</a></li><li><a href="global.html#setKilometraje">setKilometraje</a></li><li><a href="global.html#setKilometrajeUltMantenimiento">setKilometrajeUltMantenimiento</a></li><li><a href="global.html#setKmRecorridos">setKmRecorridos</a></li><li><a href="global.html#setMantenimiento">setMantenimiento</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Sat Nov 15 2025 21:02:23 GMT-0300 (hora estándar de Argentina)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
